{{!-- S·ª≠ d·ª•ng layout product.hbs --}}
{{!< layout/product}}

<!-- Breadcrumb -->
<section class="py-3" style="background: #f8f9fa;">
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item">
                    <a href="/" class="text-decoration-none">üè† Trang ch·ªß</a>
                </li>
                <li class="breadcrumb-item">
                    <a href="/products" class="text-decoration-none">üçá Tr√°i c√¢y</a>
                </li>
                <li class="breadcrumb-item">
                    <a href="/category/{{product.categorySlug}}" class="text-decoration-none">
                        {{product.category.icon}} {{nameCategory}}
                    </a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">
                    {{product.icon}} {{product.name}}
                </li>
            </ol>
        </nav>
    </div>
</section>

<!-- Product Detail Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <!-- Product Images -->
            <div class="col-lg-6 mb-4">
                <div class="product-images">
                    <!-- Main Image -->
                    <div class="main-image-container position-relative mb-3">
                        <img id="mainImage" src="{{product.imageURL.[0].original}}" alt="{{product.name}}" 
                             class="img-fluid rounded-3 w-100" style="height: 500px; object-fit: cover;">
                        
                        <!-- Badges -->
                        <div class="position-absolute top-0 start-0 p-3">
                            {{#if product.discount}}
                            <span class="discount-badge">üî• -{{product.discount}}%</span>
                            {{/if}}
                            {{#if product.isFresh}}
                            <span class="fresh-badge d-block mt-2">‚ú® T∆∞∆°i ngon</span>
                            {{/if}}
                            {{#if product.isOrganic}}
                            <span class="organic-badge d-block mt-2">üåø Organic</span>
                            {{/if}}
                        </div>

                        <!-- Wishlist Button -->
                        <div class="position-absolute top-0 end-0 p-3">
                            <button class="btn btn-light rounded-circle" onclick="toggleWishlist('{{product.id}}')">
                                ‚ù§Ô∏è
                            </button>
                        </div>
                    </div>

                    <!-- Thumbnail Images -->
                    {{#if product.images}}
                    <div class="row g-2">
                        {{#each product.images}}
                        <div class="col-3">
                            <img src="{{this}}" alt="{{../product.name}}" 
                                 class="img-fluid rounded-2 thumbnail-image" 
                                 style="height: 100px; width: 100%; object-fit: cover; cursor: pointer;"
                                 onclick="changeMainImage('{{this}}')">
                        </div>
                        {{/each}}
                    </div>
                    {{/if}}
                </div>
            </div>

            <!-- Product Info -->
            <div class="col-lg-6">
                <div class="product-info">
                    <!-- Product Title & Rating -->
                    <div class="mb-3">
                        <h1 class="h2 fw-bold mb-2">{{product.icon}} {{product.name}}</h1>
                        <div class="d-flex align-items-center mb-2">
                            <div class="rating me-3">
                                {{#each product.ratingStars}}
                                ‚≠ê
                                {{/each}}
                                <span class="text-muted ms-1">({{product.rating.average}}/5)</span>
                            </div>
                            <span class="text-muted">|</span>
                            <small class="text-muted ms-3">{{product.rating.count}} ƒë√°nh gi√°</small>
                            <span class="text-muted ms-3">|</span>
                            <small class="text-muted ms-3">ƒê√£ b√°n: {{product.sold}}</small>
                        </div>
                    </div>

                    <!-- Price -->
                    <div class="price-section mb-4 p-3 rounded-3" style="background: #f0fdf4; border: 2px solid #bbf7d0;">
                        <div class="d-flex align-items-center">
                            {{#if product.priceHaveDiscount}}
                            <span class="product-old-price me-3 fs-5">{{formatMoney product.price}}</span>
                            <span class="product-price fs-3 fw-bold">{{formatMoney product.priceHaveDiscount}}</span>
                            {{else}}
                            <span class="product-price fs-3 fw-bold">{{formatMoney product.price}}</span>
                            {{/if}}
                            {{#if product.discount}}
                            <span class="ms-3 text-danger fw-bold">(Ti·∫øt ki·ªám {{formatMoney (minus product.price product.priceHaveDiscount)}})</span>
                            {{/if}}
                        </div>
                        {{#if product.pricePerKg}}
                        <small class="text-muted">üí∞ Gi√°: {{formatMoney product.pricePerKg}}/kg</small>
                        {{/if}}
                    </div>

                    <!-- Product Details -->
                    <div class="product-details mb-4">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="detail-item p-3 rounded-3" style="background: #fefce8; border: 1px solid #fbbf24;">
                                    <strong>üå± Xu·∫•t x·ª©:</strong> {{product.origin}}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-item p-3 rounded-3" style="background: #ecfdf5; border: 1px solid #22c55e;">
                                    <strong>‚öñÔ∏è Tr·ªçng l∆∞·ª£ng:</strong> {{product.unit}}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-item p-3 rounded-3" style="background: #fef3c7; border: 1px solid #f59e0b;">
                                    <strong>üìÖ H·∫°n s·ª≠ d·ª•ng:</strong> {{product.expiry}}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-item p-3 rounded-3" style="background: #fce7f3; border: 1px solid #ec4899;">
                                    <strong>‚ùÑÔ∏è B·∫£o qu·∫£n:</strong> {{product.storage.instructions}}
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Vitamins & Nutrition -->
                    {{#if product.vitamins}}
                    <div class="nutrition-section mb-4">
                        <h6 class="fw-bold mb-3">üè• Dinh d∆∞·ª°ng & Vitamin:</h6>
                        <div class="d-flex flex-wrap gap-2">
                            {{#each product.vitamins}}
                            <span class="vitamin-badge">{{this}}</span>
                            {{/each}}
                        </div>
                    </div>
                    {{/if}}

                    <!-- Stock Status -->
                    <div class="stock-section mb-4 p-3 rounded-3 {{#if product.inStock}}bg-success bg-opacity-10 border border-success{{else}}bg-danger bg-opacity-10 border border-danger{{/if}}">
                        {{#if product.stockQuantity}}
                        <div class="text-success">
                            <strong>‚úÖ C√≤n h√†ng</strong>
                        </div>
                        {{else}}
                        <div class="text-danger">
                            <strong>‚ùå H·∫øt h√†ng</strong>
                            <small class="d-block">S·∫£n ph·∫©m t·∫°m th·ªùi h·∫øt h√†ng, vui l√≤ng quay l·∫°i sau!</small>
                        </div>
                        {{/if}}
                    </div>

                    <!-- Quantity & Add to Cart -->
                    {{#if product.stockQuantity}}
                    <div class="purchase-section mb-4">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label class="form-label fw-bold">üî¢ S·ªë l∆∞·ª£ng:</label>
                                <div class="quantity-selector d-flex">
                                    <button class="btn btn-outline-secondary" onclick="decreaseQuantity()">-</button>
                                    <input type="number" id="quantity" class="form-control text-center mx-2" 
                                           value="1" min="1" max="{{product.stockQuantity}}" style="max-width: 80px;">
                                    <button class="btn btn-outline-secondary" onclick="increaseQuantity()">+</button>
                                </div>
                            </div>
                            <div class="col-md-8 d-flex align-items-end">
                                <div class="d-grid gap-2 w-100">
                                    <button class="btn btn-primary btn-lg" onclick="addToCart('{{product.id}}', '{{product.name}}')">
                                        üõí Th√™m v√†o gi·ªè h√†ng
                                    </button>
                                    <button class="btn btn-fruit-orange" onclick="buyNow('{{product.id}}')">
                                        ‚ö° Mua ngay
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{/if}}

                    <!-- Delivery Info -->
                    <div class="delivery-info p-3 rounded-3" style="background: #f0f9ff; border: 1px solid #0ea5e9;">
                        <h6 class="fw-bold mb-3">üöö Th√¥ng tin giao h√†ng:</h6>
                        <ul class="list-unstyled mb-0">
                            <li class="mb-2">
                                <i class="text-success">‚úÖ</i> 
                                <strong>Giao h√†ng nhanh:</strong> 2-4 gi·ªù t·∫°i n·ªôi th√†nh H√† N·ªôi
                            </li>
                            <li class="mb-2">
                                <i class="text-success">‚úÖ</i> 
                                <strong>Mi·ªÖn ph√≠ ship:</strong> ƒê∆°n h√†ng t·ª´ 200,000ƒë
                            </li>
                            <li class="mb-2">
                                <i class="text-success">‚úÖ</i> 
                                <strong>ƒê·∫£m b·∫£o t∆∞∆°i:</strong> Ho√†n ti·ªÅn 100% n·∫øu kh√¥ng t∆∞∆°i ngon
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Product Description -->
<section class="py-5" style="background: #fafafa;">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="product-description bg-white rounded-3 p-4 shadow-sm">
                    <ul class="nav nav-tabs" id="productTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="description-tab" data-bs-toggle="tab" 
                                    data-bs-target="#description" type="button" role="tab">
                                üìù M√¥ t·∫£ s·∫£n ph·∫©m
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="nutrition-tab" data-bs-toggle="tab" 
                                    data-bs-target="#nutrition" type="button" role="tab">
                                üè• Th√†nh ph·∫ßn dinh d∆∞·ª°ng
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" 
                                    data-bs-target="#reviews" type="button" role="tab">
                                ‚≠ê ƒê√°nh gi√° ({{product.rating.count}})
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="shipping-tab" data-bs-toggle="tab" 
                                    data-bs-target="#shipping" type="button" role="tab">
                                üöö Ch√≠nh s√°ch giao h√†ng
                            </button>
                        </li>
                    </ul>

                    <div class="tab-content pt-4" id="productTabsContent">
                        <!-- Description Tab -->
                        <div class="tab-pane fade show active" id="description" role="tabpanel">
                            <div class="row">
                                <div class="col-lg-8">
                                    <h5 class="mb-3">üçé Gi·ªõi thi·ªáu v·ªÅ {{product.name}}</h5>
                                    <div class="description-content">
                                        {{#if product.fullDescription}}
                                        <p>{{product.fullDescription}}</p>
                                        {{else}}
                                        <p>{{product.description}}</p>
                                        {{/if}}
                                        
                                        {{#if product.benefits}}
                                        <h6 class="mt-4 mb-3">‚ú® L·ª£i √≠ch n·ªïi b·∫≠t:</h6>
                                        <ul>
                                            {{#each product.benefits}}
                                            <li class="mb-2">{{this}}</li>
                                            {{/each}}
                                        </ul>
                                        {{/if}}

                                        {{#if product.usage}}
                                        <h6 class="mt-4 mb-3">ü•ó C√°ch s·ª≠ d·ª•ng:</h6>
                                        <p>{{product.usage}}</p>
                                        {{/if}}
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="p-3 rounded-3" style="background: #f0fdf4;">
                                        <h6 class="fw-bold mb-3">üìä Th√¥ng s·ªë k·ªπ thu·∫≠t</h6>
                                        <table class="table table-sm">
                                            <tr>
                                                <td><strong>T√™n s·∫£n ph·∫©m:</strong></td>
                                                <td>{{product.name}}</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Xu·∫•t x·ª©:</strong></td>
                                                <td>{{product.origin}}</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Tr·ªçng l∆∞·ª£ng:</strong></td>
                                                <td>{{product.unit}}</td>
                                            </tr>
                                            <tr>
                                                <td><strong>H·∫°n s·ª≠ d·ª•ng:</strong></td>
                                                <td>{{product.expiry}}</td>
                                            </tr>
                                            <tr>
                                                <td><strong>B·∫£o qu·∫£n:</strong></td>
                                                <td>{{product.storage}}</td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Nutrition Tab -->
                        <div class="tab-pane fade" id="nutrition" role="tabpanel">
                            <h5 class="mb-4">üè• Th√†nh ph·∫ßn dinh d∆∞·ª°ng (tr√™n 100g)</h5>
                            {{#if product.nutritionFacts}}
                            <div class="row">
                                <div class="col-md-6">
                                    <table class="table">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Th√†nh ph·∫ßn</th>
                                                <th>Gi√° tr·ªã</th>
                                                <th>% DV*</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {{#each product.nutritionFacts}}
                                            <tr>
                                                <td>{{this.name}}</td>
                                                <td>{{this.value}}</td>
                                                <td>{{this.percentage}}%</td>
                                            </tr>
                                            {{/each}}
                                        </tbody>
                                    </table>
                                    <small class="text-muted">*%DV = % Gi√° tr·ªã dinh d∆∞·ª°ng h√†ng ng√†y</small>
                                </div>
                                <div class="col-md-6">
                                    <div class="p-3 rounded-3" style="background: #fef3c7;">
                                        <h6 class="fw-bold">üí° L∆∞u √Ω:</h6>
                                        <ul class="mb-0">
                                            <li>Gi√° tr·ªã dinh d∆∞·ª°ng c√≥ th·ªÉ thay ƒë·ªïi t√πy v√†o ƒë·ªô ch√≠n v√† ƒëi·ªÅu ki·ªán b·∫£o qu·∫£n</li>
                                            <li>N√™n ti√™u th·ª• trong ch·∫ø ƒë·ªô ƒÉn c√¢n b·∫±ng v√† l·ªëi s·ªëng l√†nh m·∫°nh</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            {{else}}
                            <p class="text-muted">Th√¥ng tin dinh d∆∞·ª°ng chi ti·∫øt ƒëang ƒë∆∞·ª£c c·∫≠p nh·∫≠t.</p>
                            {{/if}}
                        </div>

                         <!-- Reviews Tab -->
                        <div class="tab-pane fade" id="reviews" role="tabpanel">
                            <div class="reviews-section">
                                <!-- Reviews List -->
                                {{#if reviewsData}}
                                <div class="reviews-list">
                                    {{#each reviewsData}}
                                    <div class="review-item p-4 mb-3 rounded-3 shadow-sm" style="background: #ffffff; border: 1px solid #e9ecef;">
                                        <div class="d-flex mb-3">
                                            <!-- User Avatar -->
                                            <div class="me-3">
                                                {{#if this.user.avatar}}
                                                    <img src="{{this.user.avatar}}" 
                                                        alt="{{this.user.name}}" 
                                                        class="rounded-circle" 
                                                        style="width: 50px; height: 50px; object-fit: cover; border: 2px solid #f8f9fa;">
                                                {{else}}
                                                    <div class="rounded-circle d-flex align-items-center justify-content-center" 
                                                        style="width: 50px; height: 50px; background: linear-gradient(45deg, #667eea 0%, #764ba2 100%); color: white; font-weight: bold; font-size: 18px;">
                                                        {{substring this.user.name 0 1}}
                                                    </div>
                                                {{/if}}
                                            </div>
                                            
                                            <!-- Review Content -->
                                            <div class="flex-grow-1">
                                                <div class="d-flex justify-content-between align-items-start mb-2">
                                                    <div>
                                                        <h6 class="mb-1 fw-bold text-dark">{{this.user.name}}</h6>
                                                        <div class="d-flex align-items-center">
                                                            <div class="rating me-2"
                                                                {{#times this.rating}}
                                                                    <span class="text-warning">‚≠ê</span>
                                                                {{/times}}
                                                                {{#times (minus 5 this.rating)}}
                                                                    <span class="text-muted">‚òÜ</span>
                                                                {{/times}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <small class="text-muted">
                                                        {{formatDate this.createdAt}}
                                                    </small>
                                                </div>
                                                
                                                <!-- Review Comment -->
                                                {{#if this.comment}}
                                                    <div class="review-comment">
                                                        <p class="mb-0 text-secondary" style="line-height: 1.6;">
                                                            "{{this.comment}}"
                                                        </p>
                                                    </div>
                                                {{else}}
                                                    <div class="review-comment">
                                                        <p class="mb-0 text-muted fst-italic">
                                                            Ng∆∞·ªùi d√πng ƒë√£ ƒë√°nh gi√° nh∆∞ng kh√¥ng ƒë·ªÉ l·∫°i b√¨nh lu·∫≠n.
                                                        </p>
                                                    </div>
                                                {{/if}}
                                            </div>
                                        </div>
                                    </div>
                                    {{/each}}
                                    
                                    <!-- Load More Button -->
                                    {{#if hasMoreReviews}}
                                    <div class="text-center mt-4">
                                        <button class="btn btn-outline-primary" onclick="loadMoreReviews()">
                                            Xem th√™m ƒë√°nh gi√°
                                        </button>
                                    </div>
                                    {{/if}}
                                </div>
                                {{else}}
                                <div class="text-center py-5">
                                    <div style="font-size: 4rem;" class="mb-3">üìù</div>
                                    <h5 class="mt-3 text-dark">Ch∆∞a c√≥ ƒë√°nh gi√° n√†o</h5>
                                    <p class="text-muted mb-4">H√£y l√† ng∆∞·ªùi ƒë·∫ßu ti√™n ƒë√°nh gi√° s·∫£n ph·∫©m n√†y!</p>
                                    <button class="btn btn-primary">
                                        Vi·∫øt ƒë√°nh gi√° ƒë·∫ßu ti√™n
                                    </button>
                                </div>
                                {{/if}}
                            </div>
                        </div>

                        <!-- Shipping Tab -->
                        <div class="tab-pane fade" id="shipping" role="tabpanel">
                            <h5 class="mb-4">üöö Ch√≠nh s√°ch giao h√†ng & ƒë·ªïi tr·∫£</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="shipping-info">
                                        <h6 class="fw-bold mb-3">üì¶ Giao h√†ng:</h6>
                                        <ul class="list-unstyled">
                                            <li class="mb-2">‚úÖ Giao h√†ng nhanh 2-4h t·∫°i n·ªôi th√†nh</li>
                                            <li class="mb-2">‚úÖ Giao h√†ng to√†n qu·ªëc trong 1-3 ng√†y</li>
                                            <li class="mb-2">‚úÖ Mi·ªÖn ph√≠ ship ƒë∆°n t·ª´ 200,000ƒë</li>
                                            <li class="mb-2">‚úÖ ƒê√≥ng g√≥i c·∫©n th·∫≠n, ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="return-policy">
                                        <h6 class="fw-bold mb-3">üîÑ Ch√≠nh s√°ch ƒë·ªïi tr·∫£:</h6>
                                        <ul class="list-unstyled">
                                            <li class="mb-2">üõ°Ô∏è ƒê·ªïi tr·∫£ trong 24h n·∫øu kh√¥ng t∆∞∆°i ngon</li>
                                            <li class="mb-2">üíØ Ho√†n ti·ªÅn 100% n·∫øu kh√¥ng h√†i l√≤ng</li>
                                            <li class="mb-2">üìû H·ªó tr·ª£ kh√°ch h√†ng 24/7</li>
                                            <li class="mb-2">‚ö° X·ª≠ l√Ω khi·∫øu n·∫°i nhanh ch√≥ng</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Related Products -->
{{#if relatedProducts}}
<section class="py-5">
    <div class="container">
        <div class="row mb-4">
            <div class="col-12 text-center">
                <h3 class="fw-bold">üçá S·∫£n ph·∫©m li√™n quan</h3>
                <p class="text-muted">Nh·ªØng tr√°i c√¢y t∆∞∆°i ngon kh√°c b·∫°n c√≥ th·ªÉ th√≠ch</p>
            </div>
        </div>
        <div class="row">
            {{#each relatedProducts}}
            <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                <div class="product-card position-relative h-100">
                    {{#if this.discount}}
                    <div class="discount-badge">üî•-{{this.discount}}%</div>
                    {{/if}}
                    {{#if this.isFresh}}
                    <div class="fresh-badge">‚ú® T∆∞∆°i ngon</div>
                    {{/if}}
                    
                    <div class="position-relative overflow-hidden">
                        <img src="{{this.image}}" alt="{{this.name}}" class="product-image">
                    </div>
                    
                    <div class="p-3">
                        <div class="rating mb-2">
                            {{#each this.ratingStars}}
                            ‚≠ê
                            {{/each}}
                            <small class="text-muted ms-1">({{this.reviewCount}})</small>
                        </div>
                        
                        <h6 class="product-title">{{this.icon}} {{this.name}}</h6>
                        
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div>
                                {{#if this.oldPrice}}
                                <span class="product-old-price me-2">{{formatPrice this.oldPrice}}</span>
                                {{/if}}
                                <span class="product-price">{{formatPrice this.price}}</span>
                            </div>
                        </div>
                        
                        <div class="d-grid">
                            <a href="/product/{{this.slug}}" class="btn btn-outline-primary">
                                üëÅÔ∏è Xem chi ti·∫øt
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
</section>
{{/if}}

<script>
// Change main image when clicking thumbnail
function changeMainImage(imageSrc) {
    document.getElementById('mainImage').src = imageSrc;
}

// Quantity controls
function increaseQuantity() {
    const quantityInput = document.getElementById('quantity');
    const currentValue = parseInt(quantityInput.value);
    const maxValue = parseInt(quantityInput.max);
    
    if (currentValue < maxValue) {
        quantityInput.value = currentValue + 1;
    }
}

function decreaseQuantity() {
    const quantityInput = document.getElementById('quantity');
    const currentValue = parseInt(quantityInput.value);
    
    if (currentValue > 1) {
        quantityInput.value = currentValue - 1;
    }
}

// Add to cart with quantity
function addToCart(productId, productName) {
    const quantity = document.getElementById('quantity').value;
    alert(`üõí ƒê√£ th√™m ${quantity}kg ${productName} v√†o gi·ªè h√†ng!`);
    // Here you would make an AJAX call to add to cart
}

// Buy now function
function buyNow(productId) {
    const quantity = document.getElementById('quantity').value;
    alert(`‚ö° Chuy·ªÉn ƒë·∫øn trang thanh to√°n...`);
    // Redirect to checkout page
    // window.location.href = `/checkout?product=${productId}&quantity=${quantity}`;
}

// Toggle wishlist
function toggleWishlist(productId) {
    const button = event.target.closest('button');
    const icon = button.innerHTML;
    
    if (icon.includes('‚ù§Ô∏è')) {
        button.innerHTML = 'üíî';
        button.style.color = '#6b7280';
        alert('üíî ƒê√£ x√≥a kh·ªèi danh s√°ch y√™u th√≠ch');
    } else {
        button.innerHTML = '‚ù§Ô∏è';
        button.style.color = '#ef4444';
        alert('‚ù§Ô∏è ƒê√£ th√™m v√†o danh s√°ch y√™u th√≠ch');
    }
}

// Smooth scroll for anchor links
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Bootstrap tabs
    const triggerTabList = [].slice.call(document.querySelectorAll('#productTabs button'));
    triggerTabList.forEach(function(triggerEl) {
        const tabTrigger = new bootstrap.Tab(triggerEl);
    });

    // ·∫®n c√°c ƒë√°nh gi√° t·ª´ index 3 tr·ªü ƒëi
    const reviewItems = document.querySelectorAll('.review-item');
    if (reviewItems.length > 3) {
        for (let i = 3; i < reviewItems.length; i++) {
            reviewItems[i].style.display = 'none';
        }
        // Hi·ªÉn th·ªã n√∫t "Xem th√™m" n·∫øu c√≥ h∆°n 3 ƒë√°nh gi√°
        const loadMoreBtn = document.querySelector('.btn-outline-primary');
        if (loadMoreBtn) loadMoreBtn.style.display = 'block';
    }

    // X·ª≠ l√Ω n√∫t "Xem th√™m"
    window.loadMoreReviews = function() {
        const reviewItems = document.querySelectorAll('.review-item');
        let allShown = true;

        reviewItems.forEach(item => {
            if (item.style.display === 'none') {
                item.style.display = 'block';
                allShown = false;
            }
        });

        // ·∫®n n√∫t "Xem th√™m" n·∫øu t·∫•t c·∫£ ƒë√£ hi·ªÉn th·ªã
        if (allShown) {
            const loadMoreBtn = document.querySelector('.btn-outline-primary');
            if (loadMoreBtn) loadMoreBtn.style.display = 'none';
        }
    };
});
</script>